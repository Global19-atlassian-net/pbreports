test_basic (test_pbreports_filter_subread_summary.TestFilterSubreadSummaryIntegration) ... ok
test_basic (test_pbreports_filter_subread_summary.TestFilterSubreadSummaryReport) ... ok
Test that intervals in the IntervalTree are interpreted ... ok
Test random interval lists. ... ok
test_alignment_info_from_bam (test_pbreports_io_bam.TestBam) ... SKIP: FIXME
test_columns (test_pbreports_io_bam.TestBam) ... ok
test_datum (test_pbreports_io_bam.TestBam) ... ok
test_movie_names (test_pbreports_io_bam.TestBam) ... ok
test_read_aligned_bam (test_pbreports_io_bam.TestBam) ... ok
test_unrolled (test_pbreports_io_bam.TestBam) ... ok
test_alignment_info_from_bam (test_pbreports_io_bam.TestBamLarge) ... ok
test_columns (test_pbreports_io_bam.TestBamLarge) ... ok
test_datum (test_pbreports_io_bam.TestBamLarge) ... ok
test_movie_names (test_pbreports_io_bam.TestBamLarge) ... ok
test_read_aligned_bam (test_pbreports_io_bam.TestBamLarge) ... ok
test_unrolled (test_pbreports_io_bam.TestBamLarge) ... ok
Incorrect csv should be rejected immediately if strict == True ... ok
Test: Count num csv records ... ok
Test: Assert array equals when getting column data ... ok
Test: Throws IOError in constructor ... ok
Test: get num reads from csv ... ok
test_count_aggregator (test_pbreports_model_aggregators.TestAggregators) ... ok
test_histogram_aggregator (test_pbreports_model_aggregators.TestAggregators) ... ok
test_max_aggregator (test_pbreports_model_aggregators.TestAggregators) ... ok
test_mean_aggregator (test_pbreports_model_aggregators.TestAggregators) ... ok
test_min_aggregator (test_pbreports_model_aggregators.TestAggregators) ... ok
test_sum_aggregator (test_pbreports_model_aggregators.TestAggregators) ... ok
test_basic (test_pbreports_model_validators.TestAttributeValidators) ... ok
test_failed_id (test_pbreports_model_validators.TestAttributeValidators) ... ok
test_int_id (test_pbreports_model_validators.TestAttributeValidators) ... ok
test_null_name (test_pbreports_model_validators.TestAttributeValidators) ... ok
test_basic (test_pbreports_model_validators.TestColumnValidator) ... ok
test_basic (test_pbreports_model_validators.TestPlotGroupValidator) ... ok
test_basic (test_pbreports_model_validators.TestPlotValidator) ... ok
test_basic (test_pbreports_model_validators.TestTableValidator) ... ok
Save std histograms. ... ok
test__read_in_file (test_pbreports_plot_rainbow.TestRainbowPlot) ... ok
test__read_in_indexed_alignmentset (test_pbreports_plot_rainbow.TestRainbowPlot) ... ok
test_basic (test_pbreports_report_amplicon_analysis_consensus.TestEmptyInputFile) ... ok
test_basic (test_pbreports_report_amplicon_analysis_consensus.TestIntegrationLongAmpliconAnalysisReport) ... ok
test_basic (test_pbreports_report_amplicon_analysis_consensus.TestLongAmpliconAnalysisReport) ... ok
test_basic (test_pbreports_report_amplicon_analysis_consensus.TestSingleEntryInputFile) ... ok
test_integration (test_pbreports_report_amplicon_analysis_input.TestLongAmpliconAnalysisPcrReport) ... Exit code 2 Failed cmd 'amplicon_analysis_input_report --debug /home/blerch/github/pbreports/tests/data/amplicon_analysis_input/amplicon_analysis_summary.csv /home/blerch/github/pbreports/tests/data/amplicon_analysis_input/amplicon_analysis_zmws.json /tmp/tmpa4_ec3.json'
[]
[INFO] 2016-08-02 01:28:44,642Z [pbreports.report.amplicon_analysis_input _pacbio_main_runner 128] Using pbcommand v0.4.3
[INFO] 2016-08-02 01:28:44,643Z [pbreports.report.amplicon_analysis_input _pacbio_main_runner 129] completed setting up logger with <function setup_log at 0x7f26fa75b050>
[INFO] 2016-08-02 01:28:44,643Z [pbreports.report.amplicon_analysis_input _pacbio_main_runner 130] log opts {'file_name': None, 'level': 10}
[INFO] 2016-08-02 01:28:44,643Z [pbreports.report.amplicon_analysis_input amplicon_analysis_input 175] Running amplicon_analysis_input.pyc v0.1.1.
[INFO] 2016-08-02 01:28:44,643Z [pbreports.report.amplicon_analysis_input run_to_report 155] Generating PCR report v0.1.1 from summary '/home/blerch/github/pbreports/tests/data/amplicon_analysis_input/amplicon_analysis_summary.csv' and ZMW mappings '/home/blerch/github/pbreports/tests/data/amplicon_analysis_input/amplicon_analysis_zmws.json'
'Barcode1--1_Cluster1_Phase1_NumReads266'
Traceback (most recent call last):
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/cli/core.py", line 136, in _pacbio_main_runner
    return_code = exe_main_func(*args, **kwargs)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbreports/report/amplicon_analysis_input.py", line 183, in args_runner
    amplicon_analysis_input(args.report_csv, args.zmw_csv, args.report_json)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbreports/report/amplicon_analysis_input.py", line 176, in amplicon_analysis_input
    report = run_to_report(summary_csv, zmws_csv)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbreports/report/amplicon_analysis_input.py", line 162, in run_to_report
    tabulated_data = tabulate_results(summary_data, consensus_sums)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbreports/report/amplicon_analysis_input.py", line 104, in tabulate_results
    weight = consensus_sums[consensus]
KeyError: 'Barcode1--1_Cluster1_Phase1_NumReads266'
[ERROR] 2016-08-02 01:28:44,661Z [pbreports.report.amplicon_analysis_input _pacbio_main_runner 141] 'Barcode1--1_Cluster1_Phase1_NumReads266'
Traceback (most recent call last):
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/cli/core.py", line 136, in _pacbio_main_runner
    return_code = exe_main_func(*args, **kwargs)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbreports/report/amplicon_analysis_input.py", line 183, in args_runner
    amplicon_analysis_input(args.report_csv, args.zmw_csv, args.report_json)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbreports/report/amplicon_analysis_input.py", line 176, in amplicon_analysis_input
    report = run_to_report(summary_csv, zmws_csv)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbreports/report/amplicon_analysis_input.py", line 162, in run_to_report
    tabulated_data = tabulate_results(summary_data, consensus_sums)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbreports/report/amplicon_analysis_input.py", line 104, in tabulate_results
    weight = consensus_sums[consensus]
KeyError: 'Barcode1--1_Cluster1_Phase1_NumReads266'
[INFO] 2016-08-02 01:28:44,671Z [pbreports.report.amplicon_analysis_input _pacbio_main_runner 153] exiting with return code 2 in 0.02 sec.
FAIL
test_make_report (test_pbreports_report_amplicon_analysis_input.TestLongAmpliconAnalysisPcrReport) ... ok
test_process_files (test_pbreports_report_amplicon_analysis_input.TestLongAmpliconAnalysisPcrReport) ... ok
test_basic (test_pbreports_report_amplicon_analysis_timing.TestAmpliconAnalysisTimingReport) ... ok
test_basic (test_pbreports_report_amplicon_analysis_timing.TestIntegrationAmpliconAnalysisTimingReport) ... ok
test_integration (test_pbreports_report_barcode.TestBarcodeIntegration) ... ok
test_basic (test_pbreports_report_barcode.TestBarcodeReportBasic) ... ok
test_integration (test_pbreports_report_barcode.TestReadsOfInsertBarcodeIntegration) ... SKIP: TODO
test_basic (test_pbreports_report_barcode.TestReadsOfInsertBarcodeReportBasic) ... SKIP: TODO
test_run_e2e (test_pbreports_report_barcode.TestToolContract) ... ok
test_ccs_barcodes_table (test_pbreports_report_ccs.TestCCSBarcoded) ... ok
Basic smoke test ... ok
Run cmdline tool with .bam input ... ok
Run cmdline tool with .xml input ... ok
test_basic (test_pbreports_report_ccs.TestCCSMetrics) ... ok
test_images (test_pbreports_report_ccs.TestCCSMetrics) ... ok
test_mean_accuracy (test_pbreports_report_ccs.TestCCSMetrics) ... ok
test_mean_ccs_num_passes (test_pbreports_report_ccs.TestCCSMetrics) ... ok
test_mean_ccs_readlength (test_pbreports_report_ccs.TestCCSMetrics) ... ok
test_number_of_ccs_reads (test_pbreports_report_ccs.TestCCSMetrics) ... ok
test_smoke_attributes (test_pbreports_report_ccs.TestCCSMetrics) ... ok
test_total_number_of_ccs_bases (test_pbreports_report_ccs.TestCCSMetrics) ... ok
Check that the report doesn't crash when a single BAM file contains ... ok
test_run_e2e (test_pbreports_report_ccs.TestToolContract) ... ok
Create all report attributes, test values ... ok
Test that the length figure obj is not None ... ok
Test that the score figure obj is not None ... ok
Like a cram test. Assert exits with 0. ... ok
Test that a correct control name is returned. Also, test the control reads dict. ... ok
Test the special error report you get when ... No handlers could be found for logger "pbreports.report.control"
ok
Test that only reads that passed filter are returned ... ok
Test that the report gets written proppa ... ok
cmp.h5 must exist ... ok
csv must exist ... ok
cmp.h5 cannot be null ... ok
csv cannot be null ... ok
Assert length of sample and control arrays ... ok
Test that attribute values match expected ... ok
test_attributes_high_coverage (test_pbreports_report_coverage.TestCoveragePlotQuivered) ... SKIP: Not applicable
Test top contigs from ref ... ok
Simple non-null test of single contig fig,ax ... ok
Test that plotGroup of the histogram is created as expected ... ok
Test that plotGroup of coverage plots is created as expected ... ok
Simple (non null) test of histogram ... ok
Like a cram test. Assert exits with 0. ... ok
Like a cram test. Assert exits with 0, even though totalNumContigs is 0. ... ok
Like a cram test. Assert exits with 0 with ReferenceSet XML ... ok
Test the coverage stats object (needs more) ... ok
Create a report object, do assertions on its properties, then assert that it gets written ... ok
Gff exists ... ok
Reference must exist ... ok
Gff cannot be null ... ok
Reference cannot be null ... ok
test_plot_file_names (test_pbreports_report_coverage.TestCoveragePlotQuivered) ... ok
Test top contigs from ref ... ok
Test that attribute values match expected ... ok
test_attributes_high_coverage (test_pbreports_report_coverage.TestCoverageRpt) ... ok
Test top contigs from ref ... ok
Simple non-null test of single contig fig,ax ... ok
Test that plotGroup of the histogram is created as expected ... ok
Test that plotGroup of coverage plots is created as expected ... ok
Simple (non null) test of histogram ... ok
Like a cram test. Assert exits with 0. ... ok
Like a cram test. Assert exits with 0, even though totalNumContigs is 0. ... ok
Like a cram test. Assert exits with 0 with ReferenceSet XML ... ok
Test the coverage stats object (needs more) ... ok
Create a report object, do assertions on its properties, then assert that it gets written ... ok
Gff exists ... ok
Reference must exist ... ok
Gff cannot be null ... ok
Reference cannot be null ... ok
Test top contigs from ref ... ok
test__get_contigs_to_plot (test_pbreports_report_coverage.TestManyContigs) ... ok
test_get_top_contigs (test_pbreports_report_coverage.TestManyContigs) ... ok
test_make_report (test_pbreports_report_coverage.TestManyContigs) ... ok
test_run_e2e (test_pbreports_report_coverage.TestToolContract) ... ok
test_basic (test_pbreports_report_filter_subread.TestFilterSubreadReportNoSubreadsFound) ... ok
test_basic (test_pbreports_report_filter_subread.TestFilterSubreadReportNoSubreadsPassedFilterException) ... ok
test_attribute_filter_subread_mean (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReport) ... ok
test_attribute_filter_subread_n50 (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReport) ... ok
test_attribute_filter_subread_nbases (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReport) ... ok
test_attribute_filter_subread_nreads (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReport) ... ok
test_basic (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReport) ... ok
test_images (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReport) ... ok
test_plot_group_id (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReport) ... ok
test_write_json (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReport) ... ok
test_attribute_filter_subread_mean (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReportIntegration) ... ok
test_attribute_filter_subread_n50 (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReportIntegration) ... ok
test_attribute_filter_subread_nbases (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReportIntegration) ... ok
test_attribute_filter_subread_nreads (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReportIntegration) ... ok
test_basic (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReportIntegration) ... ok
test_images (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReportIntegration) ... ok
test_plot_group_id (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReportIntegration) ... ok
test_write_json (test_pbreports_report_filter_subread.TestFilterSubreadSummaryReportIntegration) ... ok
test_run_e2e (test_pbreports_report_isoseq.PbTestApp) ... ok
test_exit_code (test_pbreports_report_isoseq.TestIsoSeqClassify) ... ok
test_images_exist (test_pbreports_report_isoseq.TestIsoSeqClassify) ... ok
test_report_id (test_pbreports_report_isoseq.TestIsoSeqClassify) ... ok
test_report_plot_groups (test_pbreports_report_isoseq.TestIsoSeqClassify) ... ok
test_validate_report (test_pbreports_report_isoseq.TestIsoSeqClassify) ... ok
test_run_e2e (test_pbreports_report_isoseq.TestIsoSeqClassifyTCI) ... ok
test_exit_code (test_pbreports_report_isoseq.TestIsoSeqCluster) ... ok
test_images_exist (test_pbreports_report_isoseq.TestIsoSeqCluster) ... ok
test_report_id (test_pbreports_report_isoseq.TestIsoSeqCluster) ... ok
test_report_plot_groups (test_pbreports_report_isoseq.TestIsoSeqCluster) ... ok
test_validate_report (test_pbreports_report_isoseq.TestIsoSeqCluster) ... ok
test_run_e2e (test_pbreports_report_isoseq.TestIsoSeqClusterTCI) ... ok
test_mapped_readlength_max (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_mapped_readlength_mean (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_mapped_readlength_n50 (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_mapped_readlength_q95 (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_mapped_subread_bases_n (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_mapped_subread_concordance_mean (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_mapped_subread_readlength_mean (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_mapped_subreadlength_n50 (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_number_of_attributes (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_number_of_columns_in_table (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_number_of_mapped_reads (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_number_of_mapped_subreads (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_number_of_plot_groups (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_number_of_tables (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_report_metadata (test_pbreports_report_mapping_stats.TestEmptyBAM) ... ok
test_basic (test_pbreports_report_mapping_stats.TestIntegrationMappingStatsReport) ... FAIL
test_attributes_order (test_pbreports_report_mapping_stats.TestMappingStatsCCSReport) ... ok
test_mapped_read_concordance_mean (test_pbreports_report_mapping_stats.TestMappingStatsCCSReport) ... ok
test_mapped_readlength_max (test_pbreports_report_mapping_stats.TestMappingStatsCCSReport) ... ok
test_mapped_readlength_mean (test_pbreports_report_mapping_stats.TestMappingStatsCCSReport) ... ok
test_mapped_readlength_q95 (test_pbreports_report_mapping_stats.TestMappingStatsCCSReport) ... ok
test_mapped_reads_n (test_pbreports_report_mapping_stats.TestMappingStatsCCSReport) ... ok
test_number_of_attributes (test_pbreports_report_mapping_stats.TestMappingStatsCCSReport) ... ok
test_number_of_plot_groups (test_pbreports_report_mapping_stats.TestMappingStatsCCSReport) ... ok
test_number_of_tables (test_pbreports_report_mapping_stats.TestMappingStatsCCSReport) ... ok
test_report_metadata (test_pbreports_report_mapping_stats.TestMappingStatsCCSReport) ... ok
Test that report doesn't crash on duplicate subreads ... ok
test_all_movies_in_table_have_mapped_reads (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_mapped_readlength_max (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_mapped_readlength_mean (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_mapped_readlength_n50 (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_mapped_readlength_q95 (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_mapped_subread_bases_n (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_mapped_subread_concordance_mean (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_mapped_subread_readlength_mean (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_mapped_subreadlength_n50 (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_number_of_attributes (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_number_of_columns_in_table (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_number_of_mapped_reads (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_number_of_mapped_subreads (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_number_of_plot_groups (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_number_of_tables (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_report_metadata (test_pbreports_report_mapping_stats.TestMappingStatsMultipleMovies) ... ok
test_mapped_readlength_max (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_mapped_readlength_mean (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_mapped_readlength_n50 (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_mapped_readlength_q95 (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_mapped_subread_bases_n (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_mapped_subread_concordance_mean (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_mapped_subread_readlength_mean (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_mapped_subreadlength_n50 (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_number_of_attributes (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_number_of_columns_in_table (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_number_of_mapped_reads (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_number_of_mapped_subreads (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_number_of_plot_groups (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_number_of_tables (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_report_metadata (test_pbreports_report_mapping_stats.TestMappingStatsReport) ... ok
test_mapped_readlength_max (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_mapped_readlength_mean (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_mapped_readlength_n50 (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_mapped_readlength_q95 (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_mapped_subread_bases_n (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_mapped_subread_concordance_mean (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_mapped_subread_readlength_mean (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_mapped_subreadlength_n50 (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_number_of_attributes (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_number_of_columns_in_table (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_number_of_mapped_reads (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_number_of_mapped_subreads (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_number_of_plot_groups (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_number_of_tables (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_report_metadata (test_pbreports_report_mapping_stats.TestMappingStatsReportLarge) ... ok
test_attributes_order (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_mapped_readlength_max (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_mapped_readlength_mean (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_mapped_readlength_n50 (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_mapped_readlength_q95 (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_mapped_subread_bases_n (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_mapped_subread_concordance_mean (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_mapped_subread_readlength_mean (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_mapped_subreadlength_n50 (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_number_of_attributes (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_number_of_columns_in_table (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_number_of_mapped_reads (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_number_of_mapped_subreads (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_number_of_plot_groups (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_number_of_tables (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_report_metadata (test_pbreports_report_mapping_stats.TestMappingStatsReportXML) ... ok
test_mapped_readlength_max (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_mapped_readlength_mean (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_mapped_readlength_n50 (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_mapped_readlength_q95 (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_mapped_subread_bases_n (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_mapped_subread_concordance_mean (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_mapped_subread_readlength_mean (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_mapped_subreadlength_n50 (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_number_of_attributes (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_number_of_columns_in_table (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_number_of_mapped_reads (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_number_of_mapped_subreads (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_number_of_plot_groups (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_number_of_tables (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_report_metadata (test_pbreports_report_mapping_stats.TestPartialEmptyBAM) ... ok
test_run_e2e (test_pbreports_report_mapping_stats.TestPbreportMappingStats) ... ok
test_run_e2e (test_pbreports_report_mapping_stats.TestPbreportMappingStatsCCS) ... ok
Like a cram test. Assert exits with 0. ... ok
Create a report object, do assertions on its properties, then assert that it gets written ... ok
test_run_e2e (test_pbreports_report_modifications.TestPbreportModifications) ... ok
test_basic (test_pbreports_report_motifs.TestIntegrationKineticsMotifs) ... ok
test_basic (test_pbreports_report_motifs.TestKineticsMotifs) ... ok
test_basic (test_pbreports_report_motifs.TestKineticsMotifsMain) ... loading data config from /home/blerch/github/pbreports/tests/nose.cfg
Loading data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data
Loading data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data
Loading data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data
log file pbreports-unittest.log
Loading data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data
[INFO] 2016-08-02 01:31:52,507Z [root _pacbio_main_runner 128] Using pbcommand v0.4.3
[INFO] 2016-08-02 01:31:52,507Z [root _pacbio_main_runner 129] completed setting up logger with <function setup_log at 0x7f5104dc8938>
[INFO] 2016-08-02 01:31:52,507Z [root _pacbio_main_runner 130] log opts {'file_name': None, 'level': 20}
[INFO] 2016-08-02 01:31:52,507Z [root to_motifs_report 560] starting Motif report generations with: 
GFF:/home/blerch/github/pbreports/tests/data/kinetics/motifs.gff.gz
CSV:/home/blerch/github/pbreports/tests/data/kinetics/motif_summary.csv
dir:/tmp
[INFO] 2016-08-02 01:31:52,982Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/motif_histogram.png with dpi 72
[INFO] 2016-08-02 01:31:53,305Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/motif_histogram_thumb.png with dpi 20
[INFO] 2016-08-02 01:31:53,444Z [root addQmodMotifHist 511] ('/tmp/motif_histogram.png', '/tmp/motif_histogram_thumb.png')
[INFO] 2016-08-02 01:31:53,445Z [root _motif_csv_to_records 150] Found 12 columns
[INFO] 2016-08-02 01:31:53,445Z [root _motif_csv_to_records 173] Found 9 motif records from /home/blerch/github/pbreports/tests/data/kinetics/motif_summary.csv
[INFO] 2016-08-02 01:31:53,455Z [root _write_report 600] Write report motifs to /tmp/tmp71jyfw_motif_report.json
[INFO] 2016-08-02 01:31:53,456Z [root _pacbio_main_runner 153] exiting with return code 0 in 0.95 sec.
ok
test_run_e2e (test_pbreports_report_motifs.TestToolContract) ... [INFO] 2016-08-02 01:31:54,352Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:31:54,352Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmp2ZLKFtrtc-test/tmpGTkR4cresolved_tool_contract.json
[INFO] 2016-08-02 01:31:54,352Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.motifs  --resolved-tool-contract  /tmp/tmp2ZLKFtrtc-test/tmpGTkR4cresolved_tool_contract.json'
[INFO] 2016-08-02 01:31:56,110Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.motifs  --emit-tool-contract 
ok
test_ncells_attribute (test_pbreports_report_overview.TestOverViewReport) ... [INFO] 2016-08-02 01:31:58,032Z [test_pbreports_report_overview setUp 27] {'_comment': 'Generated with pbcommand version 0.4.3 at 2016-08-01T18:31:58.031292',
 'attributes': [{'id': 'overview.ncells', 'name': u'SMRT Cells', 'value': 2},
                {'id': 'overview.nmovies', 'name': u'Movies', 'value': 2}],
 'dataset_uuids': [],
 'id': 'overview',
 'plotGroups': [],
 'tables': [],
 'title': 'Report overview',
 'uuid': 'af756a76-a4a3-44b6-b559-b349761bee8a',
 'version': '1.0.0'}
ok
test_nmovies_attribute (test_pbreports_report_overview.TestOverViewReport) ... [INFO] 2016-08-02 01:31:59,794Z [test_pbreports_report_overview setUp 27] {'_comment': 'Generated with pbcommand version 0.4.3 at 2016-08-01T18:31:59.793541',
 'attributes': [{'id': 'overview.ncells', 'name': u'SMRT Cells', 'value': 2},
                {'id': 'overview.nmovies', 'name': u'Movies', 'value': 2}],
 'dataset_uuids': [],
 'id': 'overview',
 'plotGroups': [],
 'tables': [],
 'title': 'Report overview',
 'uuid': 'ed96c5be-cfda-4c1c-b92f-480f1f753687',
 'version': '1.0.0'}
ok
Basic functionality test ... [INFO] 2016-08-02 01:32:01,491Z [test_pbreports_report_overview setUp 27] {'_comment': 'Generated with pbcommand version 0.4.3 at 2016-08-01T18:32:01.490500',
 'attributes': [{'id': 'overview.ncells', 'name': u'SMRT Cells', 'value': 2},
                {'id': 'overview.nmovies', 'name': u'Movies', 'value': 2}],
 'dataset_uuids': [],
 'id': 'overview',
 'plotGroups': [],
 'tables': [],
 'title': 'Report overview',
 'uuid': '77dabd3f-2092-4823-8182-2ff0caac12ec',
 'version': '1.0.0'}
ok
test_basic (test_pbreports_report_overview.TestOverviewReportIntegration) ... [INFO] 2016-08-02 01:32:01,491Z [base_test_case run_backticks 66] Running cmd 'overview_report --debug /pbi/dept/secondary/siv/testdata/SA3-DS/dacetoxidans/2530923/0005_0006.subreadset.xml /tmp/tmp28oqKAoverview_report.json'
ok
test_run_e2e (test_pbreports_report_overview.TestOverviewToolContract) ... Failed to load /tmp/tmpgZVG0Trtc-test/tmp5NxOMY-TestOverviewToolContract-tool_contract.json 'NoneType' object has no attribute 'encode' 'NoneType' object has no attribute 'encode'
Traceback (most recent call last):
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 63, in _wrapper
    return func(path)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 189, in _wrapper
    return func(json_path_or_d(value))
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 306, in load_tool_contract_from
    return tool_contract_from_d(path_or_d)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 189, in _wrapper
    return func(json_path_or_d(value))
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 297, in tool_contract_from_d
    tc = dispatch_funcs[task_type](d)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 189, in _wrapper
    return func(json_path_or_d(value))
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 251, in _standard_tool_contract_from
    task_id, display_name, description, version, is_distributed, input_types, output_types, tool_options, nproc, resource_types = __core_tool_contract_task_from(path_or_d)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 189, in _wrapper
    return func(json_path_or_d(value))
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 234, in __core_tool_contract_task_from
    output_types = [_to_out_ft(x) for x in _get("output_types")]
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 224, in _to_out_ft
    return OutputFileType(fx("file_type_id"), fx("id"), fx("title"), fx("description"), fx("default_name"))
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 223, in <lambda>
    fx = lambda s: _to_a(fd[s])
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 202, in _to_a
    return x.encode('ascii', 'ignore')
AttributeError: 'NoneType' object has no attribute 'encode'
[ERROR] 2016-08-02 01:32:04,592Z [pbcommand.pb_io.tool_contract_io _wrapper 66] Failed to load /tmp/tmpgZVG0Trtc-test/tmp5NxOMY-TestOverviewToolContract-tool_contract.json 'NoneType' object has no attribute 'encode' 'NoneType' object has no attribute 'encode'
Traceback (most recent call last):
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 63, in _wrapper
    return func(path)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 189, in _wrapper
    return func(json_path_or_d(value))
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 306, in load_tool_contract_from
    return tool_contract_from_d(path_or_d)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 189, in _wrapper
    return func(json_path_or_d(value))
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 297, in tool_contract_from_d
    tc = dispatch_funcs[task_type](d)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 189, in _wrapper
    return func(json_path_or_d(value))
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 251, in _standard_tool_contract_from
    task_id, display_name, description, version, is_distributed, input_types, output_types, tool_options, nproc, resource_types = __core_tool_contract_task_from(path_or_d)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 189, in _wrapper
    return func(json_path_or_d(value))
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 234, in __core_tool_contract_task_from
    output_types = [_to_out_ft(x) for x in _get("output_types")]
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 224, in _to_out_ft
    return OutputFileType(fx("file_type_id"), fx("id"), fx("title"), fx("description"), fx("default_name"))
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 223, in <lambda>
    fx = lambda s: _to_a(fd[s])
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 202, in _to_a
    return x.encode('ascii', 'ignore')
AttributeError: 'NoneType' object has no attribute 'encode'
ERROR
Like a cram test. Assert exits with 0. ... [INFO] 2016-08-02 01:32:04,612Z [test_pbreports_report_polished_assembly test_exit_code_0 75] python -m pbreports.report.polished_assembly /home/blerch/github/pbreports/tests/data/polished_assembly/alignment_summary.gff /home/blerch/github/pbreports/tests/data/polished_assembly/assembly.fastq.gz /tmp/tmp_YGmTHcontrol/rpt.json
ok
Test the attributes of the report ... [INFO] 2016-08-02 01:32:05,766Z [pbreports.report.polished_assembly make_polished_assembly_report 59] Starting version polished_assembly.pyc v0.4
[INFO] 2016-08-02 01:32:05,845Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpOiVwLvcontrol/polished_coverage_vs_quality.png with dpi 60
[INFO] 2016-08-02 01:32:05,922Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpOiVwLvcontrol/polished_coverage_vs_quality_thumb.png with dpi 20
ok
IOError if fasta does not exist ... [INFO] 2016-08-02 01:32:05,958Z [pbreports.report.polished_assembly make_polished_assembly_report 59] Starting version polished_assembly.pyc v0.4
ok
Like a cram test. Assert exits with 0. ... [INFO] 2016-08-02 01:32:05,959Z [test_pbreports_report_polished_assembly test_exit_code_0 75] python -m pbreports.report.polished_assembly /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/polished_assembly/alignment_summary.gff /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/polished_assembly/polished_assembly.fastq.gz /tmp/tmpuQOtTMcontrol/rpt.json
ok
Test the attributes of the report ... [INFO] 2016-08-02 01:32:08,583Z [pbreports.report.polished_assembly make_polished_assembly_report 59] Starting version polished_assembly.pyc v0.4
[INFO] 2016-08-02 01:32:10,111Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmphh4wjbcontrol/polished_coverage_vs_quality.png with dpi 60
[INFO] 2016-08-02 01:32:10,219Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmphh4wjbcontrol/polished_coverage_vs_quality_thumb.png with dpi 20
ok
IOError if fasta does not exist ... [INFO] 2016-08-02 01:32:10,255Z [pbreports.report.polished_assembly make_polished_assembly_report 59] Starting version polished_assembly.pyc v0.4
ok
Like a cram test. Assert exits with 0. ... [INFO] 2016-08-02 01:32:10,256Z [test_pbreports_report_polished_assembly test_exit_code_0 75] python -m pbreports.report.polished_assembly /home/blerch/github/pbreports/tests/data/polished_assembly/alignment_summary.gff /home/blerch/github/pbreports/tests/data/polished_assembly/assembly_quiver.fastq.gz /tmp/tmpOFQf5pcontrol/rpt.json
ok
test_get_att_max_contig_length (test_pbreports_report_polished_assembly.TestPolishedAssemblyReportQuiver) ... ok
test_get_att_n_50_contig_length (test_pbreports_report_polished_assembly.TestPolishedAssemblyReportQuiver) ... ok
test_get_att_sum_contig_length (test_pbreports_report_polished_assembly.TestPolishedAssemblyReportQuiver) ... ok
Test the attributes of the report ... [INFO] 2016-08-02 01:32:11,366Z [pbreports.report.polished_assembly make_polished_assembly_report 59] Starting version polished_assembly.pyc v0.4
[INFO] 2016-08-02 01:32:11,445Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpYx0O8Xcontrol/polished_coverage_vs_quality.png with dpi 60
[INFO] 2016-08-02 01:32:11,515Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpYx0O8Xcontrol/polished_coverage_vs_quality_thumb.png with dpi 20
ok
IOError if fasta does not exist ... [INFO] 2016-08-02 01:32:11,551Z [pbreports.report.polished_assembly make_polished_assembly_report 59] Starting version polished_assembly.pyc v0.4
ok
test_run_e2e (test_pbreports_report_polished_assembly.TestToolContract) ... [INFO] 2016-08-02 01:32:12,392Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:32:12,393Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmpJd2OsXrtc-test/tmpW1xRrWresolved_tool_contract.json
[INFO] 2016-08-02 01:32:12,393Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.polished_assembly  --resolved-tool-contract  /tmp/tmpJd2OsXrtc-test/tmpW1xRrWresolved_tool_contract.json'
[INFO] 2016-08-02 01:32:13,511Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.polished_assembly  --emit-tool-contract 
ok
test_attribute (test_pbreports_report_report_spec.TestApplyView) ... ok
test_column (test_pbreports_report_report_spec.TestApplyView) ... ok
test_plot (test_pbreports_report_report_spec.TestApplyView) ... ok
test_plotgroup (test_pbreports_report_report_spec.TestApplyView) ... ok
test_table (test_pbreports_report_report_spec.TestApplyView) ... ok
test_attribute (test_pbreports_report_report_spec.TestCorrectMetaReportValues) ... ok
test_column (test_pbreports_report_report_spec.TestCorrectMetaReportValues) ... ok
test_plot (test_pbreports_report_report_spec.TestCorrectMetaReportValues) ... ok
test_plotgroup (test_pbreports_report_report_spec.TestCorrectMetaReportValues) ... ok
test_table (test_pbreports_report_report_spec.TestCorrectMetaReportValues) ... ok
test_attribute (test_pbreports_report_report_spec.TestCorrectReportValues) ... ok
test_column (test_pbreports_report_report_spec.TestCorrectReportValues) ... ok
test_plot (test_pbreports_report_report_spec.TestCorrectReportValues) ... ok
test_plotgroup (test_pbreports_report_report_spec.TestCorrectReportValues) ... ok
test_read_specs (test_pbreports_report_report_spec.TestReadingMetaReports) ... ok
test_cell_2_inst (test_pbreports_report_sat.TestCoreFunctions) ... ok
test_mapping_stats_rpt_atts (test_pbreports_report_sat.TestCoreFunctions) ... ok
test_timestamped_moviename (test_pbreports_report_sat.TestCoreFunctions) ... ok
test_variants_rpt_atts (test_pbreports_report_sat.TestCoreFunctions) ... ok
test_exit_code_0 (test_pbreports_report_sat.TestSatRpt) ... [INFO] 2016-08-02 01:32:14,244Z [test_pbreports_report_sat test_exit_code_0 110] python -m pbreports.report.sat /tmp/tmpWztzBRsat rpt.json /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/AlignmentSet/m140905_042212_sidney_c100564852550000001823085912221377_s1_X0.aligned_subreads.bam /home/blerch/github/pbreports/tests/data/sat/variants_report.json /home/blerch/github/pbreports/tests/data/sat/mapping_stats_report.json
ok
test_get_reads_info (test_pbreports_report_sat.TestSatRpt) ... [INFO] 2016-08-02 01:32:14,251Z [root _get_reads_info 163] Indexed file - will use fast loop.
ok
inputs cannot be null or non-existent ... ok
test_exit_code_0 (test_pbreports_report_sat.TestSatRptDatasetXml) ... [INFO] 2016-08-02 01:32:15,096Z [test_pbreports_report_sat test_exit_code_0 110] python -m pbreports.report.sat /tmp/tmpCWgaAYsat rpt.json /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/AlignmentSet/m140905_042212_sidney_c100564852550000001823085912221377_s1_X0.alignmentset.xml /home/blerch/github/pbreports/tests/data/sat/variants_report.json /home/blerch/github/pbreports/tests/data/sat/mapping_stats_report.json
ok
test_get_reads_info (test_pbreports_report_sat.TestSatRptDatasetXml) ... [INFO] 2016-08-02 01:32:15,103Z [root _get_reads_info 163] Indexed file - will use fast loop.
ok
inputs cannot be null or non-existent ... ok
test_run_e2e (test_pbreports_report_sat.TestSatRptToolContract) ... [INFO] 2016-08-02 01:32:15,829Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:32:15,830Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmp9ahiowrtc-test/tmp1WKdFsresolved_tool_contract.json
[INFO] 2016-08-02 01:32:15,830Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.sat  --resolved-tool-contract  /tmp/tmp9ahiowrtc-test/tmp1WKdFsresolved_tool_contract.json'
[INFO] 2016-08-02 01:32:16,473Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.sat  --emit-tool-contract 
ok
test_adapter_exit_code_0 (test_pbreports_report_stats_xml_reports.TestAdapterReport) ... COMMAND: adapter_xml /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/SubreadSet/m54006_160504_020705.tiny.subreadset.xml foo.json
[INFO] 2016-08-02 01:32:18,004Z [test_pbreports_report_stats_xml_reports test_adapter_exit_code_0 306] adapter_xml /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/SubreadSet/m54006_160504_020705.tiny.subreadset.xml foo.json
ok
Test make_adapter_report with a dataset ... o: ['[INFO] 2016-08-02 01:32:17,544Z [pbreports.report.adapter_xml _pacbio_main_runner 128] Using pbcommand v0.4.3', '[INFO] 2016-08-02 01:32:17,544Z [pbreports.report.adapter_xml _pacbio_main_runner 129] completed setting up logger with <function setup_log at 0x7f7a9e7a7230>', "[INFO] 2016-08-02 01:32:17,544Z [pbreports.report.adapter_xml _pacbio_main_runner 130] log opts {'file_name': None, 'level': 20}", '[INFO] 2016-08-02 01:32:17,544Z [pbreports.report.adapter_xml args_runner 121] Starting adapter_xml.pyc v0.1.0', '[INFO] 2016-08-02 01:32:17,544Z [pbreports.report.adapter_xml to_report 61] Analyzing XML /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/SubreadSet/m54006_160504_020705.tiny.subreadset.xml', '[INFO] 2016-08-02 01:32:17,770Z [pbreports.plot.helper _save_figures 312] Saving figure interAdapterDist0.png with dpi 72', '[INFO] 2016-08-02 01:32:17,911Z [pbreports.plot.helper _save_figures 312] Saving figure interAdapterDist0_thumb.png with dpi 20', '[INFO] 2016-08-02 01:32:17,957Z [pbreports.report.adapter_xml _pacbio_main_runner 153] exiting with return code 0 in 0.41 sec.']
c: 0
m: 
[INFO] 2016-08-02 01:32:18,006Z [pbreports.report.adapter_xml to_report 59] Analyzing XML /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcore/data/datasets/subreadSetWithStats.xml
[INFO] 2016-08-02 01:32:18,747Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpRyWcyc/interAdapterDist0.png with dpi 72
[INFO] 2016-08-02 01:32:19,052Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpRyWcyc/interAdapterDist0_thumb.png with dpi 20
[INFO] 2016-08-02 01:32:19,355Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpRyWcyc/interAdapterDist1.png with dpi 72
[INFO] 2016-08-02 01:32:19,493Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpRyWcyc/interAdapterDist1_thumb.png with dpi 20
ok
test_abstract_dist_shaper (test_pbreports_report_stats_xml_reports.TestBinning) ... ok
test_abstract_dist_shaper_float_bwidth (test_pbreports_report_stats_xml_reports.TestBinning) ... ok
test_reports_with_fixed_bins (test_pbreports_report_stats_xml_reports.TestBinning) ... [WARNING] 2016-08-02 01:32:19,822Z [pbcore.io.dataset.DataSetIO _checkObjMetadata 1341] Future warning: merging will require Version numbers for both DataSets
nbins must be greater than 0
[ERROR] 2016-08-02 01:32:19,879Z [pbreports.util dist_shaper 570] nbins must be greater than 0

[ERROR] 2016-08-02 01:32:19,891Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:19,903Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:19,915Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:19,927Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:19,938Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:19,950Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:19,962Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:19,974Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:19,986Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:19,997Z [pbreports.util dist_shaper 570] 
nbins must be greater than 0
[ERROR] 2016-08-02 01:32:20,009Z [pbreports.util dist_shaper 570] nbins must be greater than 0
nbins must be greater than 0
[ERROR] 2016-08-02 01:32:20,169Z [pbreports.util dist_shaper 570] nbins must be greater than 0
nbins must be greater than 0
[ERROR] 2016-08-02 01:32:20,319Z [pbreports.util dist_shaper 570] nbins must be greater than 0
[WARNING] 2016-08-02 01:32:20,678Z [pbcore.io.dataset.DataSetIO _checkObjMetadata 1341] Future warning: merging will require Version numbers for both DataSets
nbins must be greater than 0
[ERROR] 2016-08-02 01:32:20,735Z [pbreports.util dist_shaper 570] nbins must be greater than 0

[ERROR] 2016-08-02 01:32:20,747Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:20,759Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:20,770Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:20,782Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:20,794Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:20,806Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:20,818Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:20,829Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:20,841Z [pbreports.util dist_shaper 570] 

[ERROR] 2016-08-02 01:32:20,853Z [pbreports.util dist_shaper 570] 
nbins must be greater than 0
[ERROR] 2016-08-02 01:32:20,865Z [pbreports.util dist_shaper 570] nbins must be greater than 0
nbins must be greater than 0
[ERROR] 2016-08-02 01:32:21,025Z [pbreports.util dist_shaper 570] nbins must be greater than 0
nbins must be greater than 0
[ERROR] 2016-08-02 01:32:21,177Z [pbreports.util dist_shaper 570] nbins must be greater than 0
ok
test_loading_exit_code_0 (test_pbreports_report_stats_xml_reports.TestLoadingRpt) ... COMMAND: loading_xml /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/SubreadSet/m54006_160504_020705.sts.xml foo.json
[INFO] 2016-08-02 01:32:22,149Z [test_pbreports_report_stats_xml_reports test_loading_exit_code_0 172] loading_xml /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/SubreadSet/m54006_160504_020705.sts.xml foo.json
ok
Test that an IOError is thrown if the specified path does not exist ... o: ['[INFO] 2016-08-02 01:32:22,036Z [pbreports.report.loading_xml _pacbio_main_runner 128] Using pbcommand v0.4.3', '[INFO] 2016-08-02 01:32:22,036Z [pbreports.report.loading_xml _pacbio_main_runner 129] completed setting up logger with <function setup_log at 0x7ffd48e6cf50>', "[INFO] 2016-08-02 01:32:22,036Z [pbreports.report.loading_xml _pacbio_main_runner 130] log opts {'file_name': None, 'level': 20}", '[INFO] 2016-08-02 01:32:22,036Z [pbreports.report.loading_xml args_runner 92] Starting loading_xml.pyc v0.1.0', '[INFO] 2016-08-02 01:32:22,036Z [pbreports.report.loading_xml to_report 40] Analyzing XML /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/SubreadSet/m54006_160504_020705.sts.xml', '[INFO] 2016-08-02 01:32:22,119Z [pbreports.report.loading_xml _pacbio_main_runner 153] exiting with return code 0 in 0.08 sec.']
c: 0
m: 
[INFO] 2016-08-02 01:32:22,150Z [pbreports.report.loading_xml to_report 54] Analyzing XML foo
ok
Test the content of the loading report generated from a dataset ... [INFO] 2016-08-02 01:32:22,151Z [pbreports.report.loading_xml to_report 54] Analyzing XML /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcore/data/datasets/subreadSetWithStats.xml
ok
Test the content of the loading report generated from a sts.xml ... [INFO] 2016-08-02 01:32:22,195Z [pbreports.report.loading_xml to_report 54] Analyzing XML /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcore/data/datasets/m150430_142051_Mon_p1_b25.sts.xml
[INFO] 2016-08-02 01:32:22,400Z [pbcore.io.dataset.DataSetReader _updateStats 205] Outdated stats XML received
[INFO] 2016-08-02 01:32:22,404Z [pbcore.io.dataset.DataSetReader _updateStats 205] Outdated stats XML received
[INFO] 2016-08-02 01:32:22,408Z [pbcore.io.dataset.DataSetReader _updateStats 205] Outdated stats XML received
[INFO] 2016-08-02 01:32:22,412Z [pbcore.io.dataset.DataSetReader _updateStats 205] Outdated stats XML received
[INFO] 2016-08-02 01:32:22,416Z [pbcore.io.dataset.DataSetReader _updateStats 205] Outdated stats XML received
[INFO] 2016-08-02 01:32:22,420Z [pbcore.io.dataset.DataSetReader _updateStats 205] Outdated stats XML received
[INFO] 2016-08-02 01:32:22,424Z [pbcore.io.dataset.DataSetReader _updateStats 205] Outdated stats XML received
[INFO] 2016-08-02 01:32:22,432Z [pbcore.io.dataset.DataSetReader _updateStats 217] Outdated stats XML received
[INFO] 2016-08-02 01:32:22,435Z [pbcore.io.dataset.DataSetReader _updateStats 217] Outdated stats XML received
ok
test_filter_exit_code_0 (test_pbreports_report_stats_xml_reports.TestRawDataRpt) ... COMMAND: filter_stats_xml /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/SubreadSet/m54006_160504_020705.tiny.subreadset.xml foo.json
[INFO] 2016-08-02 01:32:24,612Z [test_pbreports_report_stats_xml_reports test_filter_exit_code_0 87] filter_stats_xml /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/SubreadSet/m54006_160504_020705.tiny.subreadset.xml foo.json
ok
Test the content of the filter report generated from a dataset ... o: ['[INFO] 2016-08-02 01:32:23,390Z [pbreports.report.filter_stats_xml _pacbio_main_runner 128] Using pbcommand v0.4.3', '[INFO] 2016-08-02 01:32:23,390Z [pbreports.report.filter_stats_xml _pacbio_main_runner 129] completed setting up logger with <function setup_log at 0x7f2caccdd578>', "[INFO] 2016-08-02 01:32:23,390Z [pbreports.report.filter_stats_xml _pacbio_main_runner 130] log opts {'file_name': None, 'level': 20}", '[INFO] 2016-08-02 01:32:23,390Z [pbreports.report.filter_stats_xml args_runner 274] Starting filter_stats_xml.pyc v0.1.0', '[INFO] 2016-08-02 01:32:23,390Z [pbreports.report.filter_stats_xml to_report 233] Analyzing XML /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/SubreadSet/m54006_160504_020705.tiny.subreadset.xml', '[INFO] 2016-08-02 01:32:24,111Z [pbreports.plot.helper _save_figures 312] Saving figure readLenDist0.png with dpi 72', '[INFO] 2016-08-02 01:32:24,241Z [pbreports.plot.helper _save_figures 312] Saving figure readLenDist0_thumb.png with dpi 20', '[INFO] 2016-08-02 01:32:24,392Z [pbreports.plot.helper _save_figures 312] Saving figure insertLenDist0.png with dpi 72', '[INFO] 2016-08-02 01:32:24,512Z [pbreports.plot.helper _save_figures 312] Saving figure insertLenDist0_thumb.png with dpi 20', '[INFO] 2016-08-02 01:32:24,557Z [pbreports.report.filter_stats_xml _pacbio_main_runner 153] exiting with return code 0 in 1.17 sec.']
c: 0
m: 
[INFO] 2016-08-02 01:32:24,613Z [pbreports.report.filter_stats_xml to_report 225] Analyzing XML /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/SubreadSet/m54006_160504_020705.tiny.subreadset.xml
[INFO] 2016-08-02 01:32:25,333Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpYJ_4D0/readLenDist0.png with dpi 72
[INFO] 2016-08-02 01:32:25,502Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpYJ_4D0/readLenDist0_thumb.png with dpi 20
[INFO] 2016-08-02 01:32:25,665Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpYJ_4D0/insertLenDist0.png with dpi 72
[INFO] 2016-08-02 01:32:25,799Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpYJ_4D0/insertLenDist0_thumb.png with dpi 20
ok
test_make_filter_stats_report_dataset_multiple_chips (test_pbreports_report_stats_xml_reports.TestRawDataRpt) ... [INFO] 2016-08-02 01:32:25,852Z [pbreports.report.filter_stats_xml to_report 225] Analyzing XML /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcore/data/datasets/subreadSetWithStats.xml
[INFO] 2016-08-02 01:32:26,279Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpqn1W1F/readLenDist0.png with dpi 72
[INFO] 2016-08-02 01:32:26,468Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpqn1W1F/readLenDist0_thumb.png with dpi 20
[INFO] 2016-08-02 01:32:26,671Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpqn1W1F/readLenDist1.png with dpi 72
[INFO] 2016-08-02 01:32:26,805Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpqn1W1F/readLenDist1_thumb.png with dpi 20
[INFO] 2016-08-02 01:32:27,613Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpqn1W1F/insertLenDist0.png with dpi 72
[INFO] 2016-08-02 01:32:27,948Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpqn1W1F/insertLenDist0_thumb.png with dpi 20
[INFO] 2016-08-02 01:32:28,294Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpqn1W1F/insertLenDist1.png with dpi 72
[INFO] 2016-08-02 01:32:28,416Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpqn1W1F/insertLenDist1_thumb.png with dpi 20
ok
Test the content of the filter report generated from an sts.xml ... [INFO] 2016-08-02 01:32:28,463Z [pbreports.report.filter_stats_xml to_report 225] Analyzing XML /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/SubreadSet/m54006_160504_020705.sts.xml
[INFO] 2016-08-02 01:32:29,193Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpTqOZqN/readLenDist0.png with dpi 72
[INFO] 2016-08-02 01:32:29,462Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpTqOZqN/readLenDist0_thumb.png with dpi 20
[INFO] 2016-08-02 01:32:29,621Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpTqOZqN/insertLenDist0.png with dpi 72
[INFO] 2016-08-02 01:32:29,758Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpTqOZqN/insertLenDist0_thumb.png with dpi 20
ok
test_run_e2e (test_pbreports_report_top_variants.TestPbreportTopVariants) ... [INFO] 2016-08-02 01:32:30,851Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:32:30,852Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmpCwDG96rtc-test/tmpgiza2presolved_tool_contract.json
[INFO] 2016-08-02 01:32:30,852Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.top_variants  --resolved-tool-contract  /tmp/tmpCwDG96rtc-test/tmpgiza2presolved_tool_contract.json'
[INFO] 2016-08-02 01:32:31,439Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.top_variants  --emit-tool-contract 
ok
Like a cram test. Assert exits with 0. ... [INFO] 2016-08-02 01:32:31,440Z [test_pbreports_report_top_variants test_exit_code_0 200] python -m pbreports.report.top_variants /tmp/tmpQIVkertopvariants rpt.json /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/variants.gff /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/ReferenceSet/lambdaNEB/sequence/lambdaNEB.fasta
[INFO] 2016-08-02 01:32:31,440Z [base_test_case run_backticks 66] Running cmd 'python -m pbreports.report.top_variants /tmp/tmpQIVkertopvariants rpt.json /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/variants.gff /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/ReferenceSet/lambdaNEB/sequence/lambdaNEB.fasta'
ok
Like a cram test. Create the minor report in a subprocess. Assert that the report is correct. ... SKIP: TEMPORARILY DISABLED
Like a cram test. Assert exits with 0 with ReferenceSet XML ... [INFO] 2016-08-02 01:32:32,086Z [test_pbreports_report_top_variants test_exit_code_0_referenceset 218] python -m pbreports.report.top_variants /tmp/tmpw2qYnBtopvariants rpt.json /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/variants.gff /tmp/tmpw2qYnBtopvariants/refset.xml
[INFO] 2016-08-02 01:32:32,086Z [base_test_case run_backticks 66] Running cmd 'python -m pbreports.report.top_variants /tmp/tmpw2qYnBtopvariants rpt.json /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/variants.gff /tmp/tmpw2qYnBtopvariants/refset.xml'
ok
Like a cram test. Assert exits with 0. This creates the 'top corrections' report, ... [INFO] 2016-08-02 01:32:32,709Z [test_pbreports_report_top_variants test_exit_code_0_top_corrections 234] python -m pbreports.report.top_variants /tmp/tmp7_7znQtopvariants rpt.json /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/variants.gff /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/ReferenceSet/lambdaNEB/sequence/lambdaNEB.fasta
ok
Call the main report generation method with minor kwarg==True. Deserialize report, check content. ... ok
Call the main report generation method. Deserialize report, check content. ... ok
input gff and ref must be non-null and exist ... ok
in inputs ... ok
Test the length and values of a table produced by the minor variant table builder ... ok
test_variant_finder (test_pbreports_report_top_variants.TestTopVariantsReport) ... ok
Test the length and values of a table produced by the standard variant table builder ... ok
Like a cram test. Assert exits with 0. ... [INFO] 2016-08-02 01:32:33,400Z [test_pbreports_report_top_variants test_exit_code_0 200] python -m pbreports.report.top_variants /tmp/tmpGou5S8topvariants rpt.json /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/topvariants/variants.gff.gz /pbi/dept/secondary/siv/references/ecoliK12_pbi_March2013/sequence/ecoliK12_pbi_March2013.fasta
[INFO] 2016-08-02 01:32:33,400Z [base_test_case run_backticks 66] Running cmd 'python -m pbreports.report.top_variants /tmp/tmpGou5S8topvariants rpt.json /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/topvariants/variants.gff.gz /pbi/dept/secondary/siv/references/ecoliK12_pbi_March2013/sequence/ecoliK12_pbi_March2013.fasta'
ok
Like a cram test. Create the minor report in a subprocess. Assert that the report is correct. ... SKIP: TEMPORARILY DISABLED
Like a cram test. Assert exits with 0 with ReferenceSet XML ... [INFO] 2016-08-02 01:32:34,093Z [test_pbreports_report_top_variants test_exit_code_0_referenceset 218] python -m pbreports.report.top_variants /tmp/tmpHS9B7Ftopvariants rpt.json /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/topvariants/variants.gff.gz /tmp/tmpHS9B7Ftopvariants/refset.xml
[INFO] 2016-08-02 01:32:34,093Z [base_test_case run_backticks 66] Running cmd 'python -m pbreports.report.top_variants /tmp/tmpHS9B7Ftopvariants rpt.json /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/topvariants/variants.gff.gz /tmp/tmpHS9B7Ftopvariants/refset.xml'
ok
Like a cram test. Assert exits with 0. This creates the 'top corrections' report, ... [INFO] 2016-08-02 01:32:34,774Z [test_pbreports_report_top_variants test_exit_code_0_top_corrections 234] python -m pbreports.report.top_variants /tmp/tmpQr8hPntopvariants rpt.json /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/topvariants/variants.gff.gz /pbi/dept/secondary/siv/references/ecoliK12_pbi_March2013/sequence/ecoliK12_pbi_March2013.fasta
ok
Call the main report generation method with minor kwarg==True. Deserialize report, check content. ... ok
Call the main report generation method. Deserialize report, check content. ... ok
input gff and ref must be non-null and exist ... ok
in inputs ... ok
test_minor_variant_table_builder (test_pbreports_report_top_variants.TestTopVariantsReportEcoli) ... SKIP: IGNORE
test_variant_finder (test_pbreports_report_top_variants.TestTopVariantsReportEcoli) ... ok
Test the length and values of a table produced by the standard variant table builder ... ok
test_run_e2e (test_pbreports_report_variants.TestToolContract) ... [INFO] 2016-08-02 01:32:36,418Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:32:36,419Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmpLUSTqwrtc-test/tmp6FP4Apresolved_tool_contract.json
[INFO] 2016-08-02 01:32:36,419Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.variants --resolved-tool-contract  /tmp/tmpLUSTqwrtc-test/tmp6FP4Apresolved_tool_contract.json'
[INFO] 2016-08-02 01:32:38,100Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.variants --emit-tool-contract 
ok
Test that ERR information gets added to the ref_data dict ... [INFO] 2016-08-02 01:32:38,105Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/alignment_summary_consensus.gff
ok
Test that plotGroup of variants plots is created as expected ... [INFO] 2016-08-02 01:32:38,119Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/alignment_summary_consensus.gff
[INFO] 2016-08-02 01:32:38,645Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpvOfMIEvariants/variants_plot_935b383a75c999221678e79f2bafcf9c.png with dpi 60
[INFO] 2016-08-02 01:32:38,829Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpvOfMIEvariants/variants_plot_935b383a75c999221678e79f2bafcf9c_thumb.png with dpi 20
ok
Like a cram test. Assert exits with 0. ... [INFO] 2016-08-02 01:32:38,964Z [base_test_case run_backticks 66] Running cmd 'python -m pbreports.report.variants /tmp/tmpoEaTIsvariants rpt.json /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/ReferenceSet/lambdaNEB/sequence/lambdaNEB.fasta /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/alignment_summary_consensus.gff /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/variants.gff'
ok
Like a cram test. Assert exits with 0 with ReferenceSet XML ... [INFO] 2016-08-02 01:32:40,800Z [base_test_case run_backticks 66] Running cmd 'python -m pbreports.report.variants /tmp/tmpQYnzq7variants rpt.json /tmp/tmpQYnzq7variants/refset.xml /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/alignment_summary_consensus.gff /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/variants.gff'
ok
Test the dicts returned from parsing the alignment_summary gff ... [INFO] 2016-08-02 01:32:42,721Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/alignment_summary_consensus.gff
ok
Test the data in the table object and the attributes ... [INFO] 2016-08-02 01:32:42,841Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/alignment_summary_consensus.gff
[INFO] 2016-08-02 01:32:42,854Z [pbreports.report.variants _get_consensus_table_and_attributes 311] length 48502.0
[INFO] 2016-08-02 01:32:42,854Z [pbreports.report.variants _get_consensus_table_and_attributes 312] gaps 0.0
[INFO] 2016-08-02 01:32:42,854Z [pbreports.report.variants _get_consensus_table_and_attributes 313] errors 5.0
ok
Test the data in the table object and the attributes ... [INFO] 2016-08-02 01:32:42,858Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/alignment_summary_consensus.gff
[INFO] 2016-08-02 01:32:42,871Z [pbreports.report.variants _get_consensus_table_and_attributes 311] length 48502.0
[INFO] 2016-08-02 01:32:42,871Z [pbreports.report.variants _get_consensus_table_and_attributes 312] gaps 0.0
[INFO] 2016-08-02 01:32:42,871Z [pbreports.report.variants _get_consensus_table_and_attributes 313] errors 5.0
ok
Create the legend png ... [INFO] 2016-08-02 01:32:42,875Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/alignment_summary_consensus.gff
[INFO] 2016-08-02 01:32:43,020Z [test_pbreports_report_variants test_legend 265] legend path: /tmp/tmpriPA5xvariants/variants_plot_legend.png
ok
Create a report object, do assertions on its properties, then assert that it gets written ... [INFO] 2016-08-02 01:32:43,026Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/GFF/alignment_summary_consensus.gff
[INFO] 2016-08-02 01:32:43,041Z [pbreports.report.variants _get_consensus_table_and_attributes 311] length 48502.0
[INFO] 2016-08-02 01:32:43,041Z [pbreports.report.variants _get_consensus_table_and_attributes 312] gaps 0.0
[INFO] 2016-08-02 01:32:43,041Z [pbreports.report.variants _get_consensus_table_and_attributes 313] errors 5.0
[INFO] 2016-08-02 01:32:43,534Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpcQBVJWvariants/variants_plot_935b383a75c999221678e79f2bafcf9c.png with dpi 60
[INFO] 2016-08-02 01:32:43,718Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpcQBVJWvariants/variants_plot_935b383a75c999221678e79f2bafcf9c_thumb.png with dpi 20
ok
inputs cannot be null or non-existent ... ok
Test top contigs from ref ... ok
Test that ERR information gets added to the ref_data dict ... [INFO] 2016-08-02 01:32:43,867Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/variants/alignment_summary.gff
ok
Test that plotGroup of variants plots is created as expected ... [INFO] 2016-08-02 01:32:43,970Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/variants/alignment_summary.gff
[INFO] 2016-08-02 01:32:45,983Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpNr4YCXvariants/variants_plot_f89645c3ca682470d17770a1655e74d7.png with dpi 60
[INFO] 2016-08-02 01:32:46,607Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmpNr4YCXvariants/variants_plot_f89645c3ca682470d17770a1655e74d7_thumb.png with dpi 20
ok
Like a cram test. Assert exits with 0. ... [INFO] 2016-08-02 01:32:47,182Z [base_test_case run_backticks 66] Running cmd 'python -m pbreports.report.variants /tmp/tmpQYno5Mvariants rpt.json /pbi/dept/secondary/siv/references/ecoliK12_pbi_March2013/sequence/ecoliK12_pbi_March2013.fasta /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/variants/alignment_summary.gff /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/variants/variants.gff.gz'
ok
Like a cram test. Assert exits with 0 with ReferenceSet XML ... [INFO] 2016-08-02 01:32:51,366Z [base_test_case run_backticks 66] Running cmd 'python -m pbreports.report.variants /tmp/tmpXvuq0Mvariants rpt.json /tmp/tmpXvuq0Mvariants/refset.xml /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/variants/alignment_summary.gff /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/variants/variants.gff.gz'
ok
Test the dicts returned from parsing the alignment_summary gff ... [INFO] 2016-08-02 01:32:55,729Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/variants/alignment_summary.gff
ok
Test the data in the table object and the attributes ... [INFO] 2016-08-02 01:32:55,773Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/variants/alignment_summary.gff
[INFO] 2016-08-02 01:32:55,829Z [pbreports.report.variants _get_consensus_table_and_attributes 311] length 4642522.0
[INFO] 2016-08-02 01:32:55,829Z [pbreports.report.variants _get_consensus_table_and_attributes 312] gaps 0.0
[INFO] 2016-08-02 01:32:55,829Z [pbreports.report.variants _get_consensus_table_and_attributes 313] errors 9.0
ok
Test the data in the table object and the attributes ... [INFO] 2016-08-02 01:32:55,833Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/variants/alignment_summary.gff
[INFO] 2016-08-02 01:32:55,876Z [pbreports.report.variants _get_consensus_table_and_attributes 311] length 4642522.0
[INFO] 2016-08-02 01:32:55,876Z [pbreports.report.variants _get_consensus_table_and_attributes 312] gaps 0.0
[INFO] 2016-08-02 01:32:55,876Z [pbreports.report.variants _get_consensus_table_and_attributes 313] errors 9.0
ok
Create the legend png ... [INFO] 2016-08-02 01:32:55,880Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/variants/alignment_summary.gff
[INFO] 2016-08-02 01:32:56,059Z [test_pbreports_report_variants test_legend 265] legend path: /tmp/tmpW7LZLTvariants/variants_plot_legend.png
ok
Create a report object, do assertions on its properties, then assert that it gets written ... [INFO] 2016-08-02 01:32:56,064Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/variants/alignment_summary.gff
[INFO] 2016-08-02 01:32:56,115Z [pbreports.report.variants _get_consensus_table_and_attributes 311] length 4642522.0
[INFO] 2016-08-02 01:32:56,115Z [pbreports.report.variants _get_consensus_table_and_attributes 312] gaps 0.0
[INFO] 2016-08-02 01:32:56,115Z [pbreports.report.variants _get_consensus_table_and_attributes 313] errors 9.0
[INFO] 2016-08-02 01:32:58,093Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmp_ANqyMvariants/variants_plot_f89645c3ca682470d17770a1655e74d7.png with dpi 60
[INFO] 2016-08-02 01:32:58,714Z [pbreports.plot.helper _save_figures 312] Saving figure /tmp/tmp_ANqyMvariants/variants_plot_f89645c3ca682470d17770a1655e74d7_thumb.png with dpi 20
ok
inputs cannot be null or non-existent ... ok
Test top contigs from ref ... ok
Test the dicts returned from parsing the alignment_summary gff ... [INFO] 2016-08-02 01:32:59,306Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/summarizeConsensus/alignment_summary_variants_big_chr.gff
ok
Test the data in the table object and the attributes ... [INFO] 2016-08-02 01:33:01,148Z [pbreports.report.variants _extract_alignment_summ_data 131] Reading GFF data from /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/summarizeConsensus/alignment_summary_variants_big_chr.gff
[INFO] 2016-08-02 01:33:08,304Z [pbreports.report.variants _get_consensus_table_and_attributes 311] length 200000000.0
[INFO] 2016-08-02 01:33:08,305Z [pbreports.report.variants _get_consensus_table_and_attributes 312] gaps 0.0
[INFO] 2016-08-02 01:33:08,305Z [pbreports.report.variants _get_consensus_table_and_attributes 313] errors 100000.0
ok
inputs cannot be null or non-existent ... ok
Test the list of seq ids ordered by len ... ok
test_help (test_pbreports_summarize_compare_by_movie.TestHelp) ... [INFO] 2016-08-02 01:33:08,308Z [base_test_case run_backticks 66] Running cmd 'summarize_compare_by_movie --help'
ok
test_basic (test_pbreports_summarize_compare_by_movie.TestIntegrationSummarizeCompareByMovie) ... [INFO] 2016-08-02 01:33:08,943Z [base_test_case run_backticks 66] Running cmd 'summarize_compare_by_movie --debug --fofn=/pbi/dept/secondary/siv/testdata/pbreports-unittest/data/control/summarize_compare_by_movie/input.fofn /pbi/dept/secondary/siv/testdata/pbreports-unittest/data/control/summarize_compare_by_movie/control_reads.cmp.h5 /tmp/tmpaSYw65_summarize_by_movie.csv'
ok
test_basic (test_pbreports_summarize_compare_by_movie.TestSummarizeCompareByMovie) ... [DEBUG] 2016-08-02 01:33:13,466 [pbreports.report.summarize_compare_by_movie main 768] Namespace(cmp_h5='/pbi/dept/secondary/siv/testdata/pbreports-unittest/data/control/summarize_compare_by_movie/control_reads.cmp.h5', debug=True, external=False, fofn='/pbi/dept/secondary/siv/testdata/pbreports-unittest/data/control/summarize_compare_by_movie/input.fofn', output_csv='/tmp/tmpbdnPp9_summarize_by_movie.csv')
[INFO] 2016-08-02 01:33:13,466 [pbreports.report.summarize_compare_by_movie _get_movie_stats_from_movie_files 532] Getting movie stats from /pbi/dept/secondary/siv/testdata/LIMS/2311209/0001/Analysis_Results/m120201_042231_42129_c100275262550000001523007907041260_s1_p0.bas.h5
[INFO] 2016-08-02 01:33:13,466Z [pbreports.report.summarize_compare_by_movie _get_movie_stats_from_movie_files 532] Getting movie stats from /pbi/dept/secondary/siv/testdata/LIMS/2311209/0001/Analysis_Results/m120201_042231_42129_c100275262550000001523007907041260_s1_p0.bas.h5
[INFO] 2016-08-02 01:33:13,466 [pbreports.report.summarize_compare_by_movie _get_movie_stats_from_movie_files 534] <MovieStats m120201_042231_42129_c100275262550000001523007907041260_s1_p0 chip:0001 instrument:42129 set:s1 part:p0 type:NA date:120201 >
[INFO] 2016-08-02 01:33:13,466Z [pbreports.report.summarize_compare_by_movie _get_movie_stats_from_movie_files 534] <MovieStats m120201_042231_42129_c100275262550000001523007907041260_s1_p0 chip:0001 instrument:42129 set:s1 part:p0 type:NA date:120201 >
[INFO] 2016-08-02 01:33:13,467 [pbreports.report.summarize_compare_by_movie run 716] {   'm120201_042231_42129_c100275262550000001523007907041260_s1_p0': <MovieStats m120201_042231_42129_c100275262550000001523007907041260_s1_p0 chip:0001 instrument:42129 set:s1 part:p0 type:NA date:120201 >}
[INFO] 2016-08-02 01:33:13,467Z [pbreports.report.summarize_compare_by_movie run 716] {   'm120201_042231_42129_c100275262550000001523007907041260_s1_p0': <MovieStats m120201_042231_42129_c100275262550000001523007907041260_s1_p0 chip:0001 instrument:42129 set:s1 part:p0 type:NA date:120201 >}
[WARNING] 2016-08-02 01:33:13,475 [pbreports.report.summarize_compare_by_movie _log_once 130] unable to get zScore from alignment ID 1 from movie
[WARNING] 2016-08-02 01:33:13,475Z [pbreports.report.summarize_compare_by_movie _log_once 130] unable to get zScore from alignment ID 1 from movie
[INFO] 2016-08-02 01:33:17,701 [pbreports.report.summarize_compare_by_movie _log_summary 693] <MovieStats m120201_042231_42129_c100275262550000001523007907041260_s1_p0 chip:0001 instrument:42129 set:s1 part:p0 type:NA date:120201 >
[INFO] 2016-08-02 01:33:17,701Z [pbreports.report.summarize_compare_by_movie _log_summary 693] <MovieStats m120201_042231_42129_c100275262550000001523007907041260_s1_p0 chip:0001 instrument:42129 set:s1 part:p0 type:NA date:120201 >
[INFO] 2016-08-02 01:33:17,702 [pbreports.report.summarize_compare_by_movie run 732] Writing output to CSV file /tmp/tmpbdnPp9_summarize_by_movie.csv
[INFO] 2016-08-02 01:33:17,702Z [pbreports.report.summarize_compare_by_movie run 732] Writing output to CSV file /tmp/tmpbdnPp9_summarize_by_movie.csv
[INFO] 2016-08-02 01:33:17,702 [pbreports.report.summarize_compare_by_movie run 747] Completed writing CSV to /tmp/tmpbdnPp9_summarize_by_movie.csv
[INFO] 2016-08-02 01:33:17,702Z [pbreports.report.summarize_compare_by_movie run 747] Completed writing CSV to /tmp/tmpbdnPp9_summarize_by_movie.csv
[INFO] 2016-08-02 01:33:17,702 [pbreports.report.summarize_compare_by_movie main 782] completed summarize_compare_by_movie.pyc v2.0 with exit code 0 in 4.24 sec.
[INFO] 2016-08-02 01:33:17,702Z [pbreports.report.summarize_compare_by_movie main 782] completed summarize_compare_by_movie.pyc v2.0 with exit code 0 in 4.24 sec.
ok
Test that alignments for each refGroupID in the BAM match the interval_list. ... ok
Test that all alignments end up in the list. ... ok
Test that the regions and calculated coverages are the same for both the bfx and pbpy summarize_coverage results. ... ok
Test that the metadata lines match those from the pbpy version of summarize_coverage. ... ok
Test the counting of contiguous gaps in the coverage array. ... ok
Test random coverage arrays for contiguous gap counting. ... ok
Test the pretty value is near the ugly value. ... ok
Test that intervals add up correctly and are interpreted as half-open. ... ok
Test that interval bounds are shifted appropriately given the region start and end. ... ok
Like a cram test. Assert exits with 0, even though region size is 0 See ... [INFO] 2016-08-02 01:33:20,584Z [test_pbreports_summarize_coverage test_exit_code_0 225] summarize_coverage --region_size=0 --num_regions=500 /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/AlignmentSet/m140905_042212_sidney_c100564852550000001823085912221377_s1_X0.alignmentset.xml /home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbtestdata-0.0.13-py2.7.egg/pbtestdata/data/ReferenceSet/lambdaNEB/sequence/lambdaNEB.fasta /tmp/tmpbw19dusumm_cov/gff
ok
Test that force_num_regions works. ... ok
Test that when force_num_regions is False, MAX_NUM_REGIONS is used to set region size. ... ok
Test that a non-zero region_size takes precedence over other options. ... ok
test_run_e2e (test_pbreports_summarize_coverage.TestSummarizeCoverage) ... [INFO] 2016-08-02 01:33:21,178Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:33:21,178Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmpf0qF9Mrtc-test/tmpt0vEGTresolved_tool_contract.json
[INFO] 2016-08-02 01:33:21,178Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.summarize_coverage.summarize_coverage  --resolved-tool-contract  /tmp/tmpf0qF9Mrtc-test/tmpt0vEGTresolved_tool_contract.json'
[INFO] 2016-08-02 01:33:22,054Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.summarize_coverage.summarize_coverage  --emit-tool-contract 
ok
test_run_e2e (test_pbreports_summarize_coverage.TestSummarizeCoverageCCS) ... [INFO] 2016-08-02 01:33:22,751Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:33:22,752Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmp6oPKIWrtc-test/tmp29XRr6resolved_tool_contract.json
[INFO] 2016-08-02 01:33:22,752Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.summarize_coverage.ccs --resolved-tool-contract  /tmp/tmp6oPKIWrtc-test/tmp29XRr6resolved_tool_contract.json'
[INFO] 2016-08-02 01:33:23,623Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.summarize_coverage.ccs --emit-tool-contract 
ok
test_01_compute_n50 (test_pbreports_util.TestFunctions) ... ok
test_02_compute_n50 (test_pbreports_util.TestFunctions) ... ok
test_accuracy_as_phred_qv (test_pbreports_util.TestUtil) ... ok
Test getting N50 from file ... ok
Test getting N50 from length list ... ok
Test getting num reads and total readlength ... ok
Parse a cell name from a movie name ... [INFO] 2016-08-02 01:33:23,656Z [test_pbreports_util test_movie_2_cell 150] 
        Parse a cell name from a movie name
        
ok
Test: Return abspath if file found ... ok
Test: Raise IOError if file not found ... ok
Test: Return abspath if file found and not empty ... ok
Test: Raise IOError if file found but empty ... ok
Test: Raise IOError if output does not exist ... [INFO] 2016-08-02 01:33:23,808Z [test_pbreports_util test_validate_output_dir 129] 
        Test: Raise IOError if output does not exist
        
ok
Test: Raise ValueError if report has path sep ... [INFO] 2016-08-02 01:33:23,865Z [test_pbreports_util test_validate_report 108] 
        Test: Raise ValueError if report has path sep
        
ok
test_run_e2e (test_tool_contract_amplicon_analysis.TestAmpliconAnalysisConsensus) ... [INFO] 2016-08-02 01:33:24,480Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:33:24,481Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmpVLgWhKrtc-test/tmp5ZLDy6resolved_tool_contract.json
[INFO] 2016-08-02 01:33:24,481Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.amplicon_analysis_consensus  --resolved-tool-contract  /tmp/tmpVLgWhKrtc-test/tmp5ZLDy6resolved_tool_contract.json'
[INFO] 2016-08-02 01:33:25,196Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.amplicon_analysis_consensus  --emit-tool-contract 
ok
test_run_e2e (test_tool_contract_amplicon_analysis.TestAmpliconAnalysisInput) ... [INFO] 2016-08-02 01:33:25,540Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:33:25,541Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmpXZP54Qrtc-test/tmp2yo78zresolved_tool_contract.json
[INFO] 2016-08-02 01:33:25,541Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.amplicon_analysis_input  --resolved-tool-contract  /tmp/tmpXZP54Qrtc-test/tmp2yo78zresolved_tool_contract.json'
[INFO] 2016-08-02 01:33:26,065Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.amplicon_analysis_input  --emit-tool-contract 
ok
test_run_e2e (test_tool_contract_amplicon_analysis.TestAmpliconAnalysisTiming) ... [INFO] 2016-08-02 01:33:26,641Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:33:26,642Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmpu6gtzurtc-test/tmpQ2j064resolved_tool_contract.json
[INFO] 2016-08-02 01:33:26,642Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.amplicon_analysis_timing  --resolved-tool-contract  /tmp/tmpu6gtzurtc-test/tmpQ2j064resolved_tool_contract.json'
INFO:__main__:Successfully loaded resolved tool contract from ['--resolved-tool-contract', '/tmp/tmpu6gtzurtc-test/tmpQ2j064resolved_tool_contract.json']
INFO:__main__:Using pbcommand v0.4.3
INFO:__main__:completed setting up logger with <function <lambda> at 0x7f88e4fff1b8>
INFO:__main__:log opts {'file_name': None, 'level': u'INFO'}
INFO:__main__:Running amplicon_analysis_timing.py v0.1.1.
INFO:__main__:Generating Timing report v0.1.1 from logfile '/home/blerch/github/pbreports/tests/data/amplicon_analysis_timing/amplicon_analysis.log'
INFO:__main__:{'_comment': 'Generated with pbcommand version 0.4.3 at 2016-08-01T18:33:27.285926',
 'attributes': [],
 'dataset_uuids': [],
 'id': 'amplicon_analysis_timing',
 'plotGroups': [],
 'tables': [{'columns': [{'header': u'Barcode Name',
                          'id': 'amplicon_analysis_timing.result_table.barcode_col',
                          'values': ['0', 'Mean', 'Median', 'Total']},
                         {'header': u'Hours',
                          'id': 'amplicon_analysis_timing.result_table.hour_col',
                          'values': [0, 0, 0, 0]},
                         {'header': u'Minutes',
                          'id': 'amplicon_analysis_timing.result_table.minute_col',
                          'values': [41, 20, 41, 49]},
                         {'header': u'Total Time (seconds)',
                          'id': 'amplicon_analysis_timing.result_table.second_col',
                          'values': [2462, 1231, 2462, 2967]}],
             'id': 'amplicon_analysis_timing.result_table',
             'title': u'Amplicon Analysis Timing Summary'}],
 'title': u'Amplicon Analysis Timing',
 'uuid': '5f130c70-a087-4504-a113-d29a021ba8eb',
 'version': '1.0.0'}
INFO:__main__:exiting with return code 0 in 0.01 sec.
INFO:__main__:Completed running resolved contract. <ResolvedToolContract id:pbreports.tasks.amplicon_analysis_timing >
[INFO] 2016-08-02 01:33:27,312Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.amplicon_analysis_timing  --emit-tool-contract 
ok
test_run_e2e (test_tool_contract_sts_xml_reports.TestAdapterReport) ... [INFO] 2016-08-02 01:33:28,203Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:33:28,204Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmpqRl0wIrtc-test/tmpvsmhecresolved_tool_contract.json
[INFO] 2016-08-02 01:33:28,204Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.adapter_xml  --resolved-tool-contract  /tmp/tmpqRl0wIrtc-test/tmpvsmhecresolved_tool_contract.json'
[INFO] 2016-08-02 01:33:30,543Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.adapter_xml  --emit-tool-contract 
ok
test_run_e2e (test_tool_contract_sts_xml_reports.TestFilterStatsReport) ... [INFO] 2016-08-02 01:33:31,644Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:33:31,645Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmpZY7o7krtc-test/tmpxjtIb_resolved_tool_contract.json
[INFO] 2016-08-02 01:33:31,645Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.filter_stats_xml  --resolved-tool-contract  /tmp/tmpZY7o7krtc-test/tmpxjtIb_resolved_tool_contract.json'
[INFO] 2016-08-02 01:33:35,031Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.filter_stats_xml  --emit-tool-contract 
ok
test_run_e2e (test_tool_contract_sts_xml_reports.TestLoadingReport) ... [INFO] 2016-08-02 01:33:35,638Z [pbcommand.testkit.core test_run_e2e 107] Resolving tool contract to RTC
[INFO] 2016-08-02 01:33:35,639Z [pbcommand.testkit.core test_run_e2e 130] running resolved contract /tmp/tmpzALs1Artc-test/tmpxSusAUresolved_tool_contract.json
[INFO] 2016-08-02 01:33:35,639Z [pbcommand.testkit.core test_run_e2e 133] Running exe 'python -m pbreports.report.loading_xml  --resolved-tool-contract  /tmp/tmpzALs1Artc-test/tmpxSusAUresolved_tool_contract.json'
[INFO] 2016-08-02 01:33:36,381Z [pbcommand.testkit.core test_run_e2e 138] Successfully completed running e2e for python -m pbreports.report.loading_xml  --emit-tool-contract 
ok

======================================================================
ERROR: test_run_e2e (test_pbreports_report_overview.TestOverviewToolContract)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/testkit/core.py", line 105, in test_run_e2e
    tc = load_tool_contract_from(output_tc)
  File "/home/blerch/pitchfork/deployment/lib/python2.7/site-packages/pbcommand/pb_io/tool_contract_io.py", line 67, in _wrapper
    raise ex_type(msg)
MalformedToolContractError: Failed to load /tmp/tmpgZVG0Trtc-test/tmp5NxOMY-TestOverviewToolContract-tool_contract.json 'NoneType' object has no attribute 'encode' 'NoneType' object has no attribute 'encode'

======================================================================
FAIL: test_integration (test_pbreports_report_amplicon_analysis_input.TestLongAmpliconAnalysisPcrReport)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/blerch/github/pbreports/tests/unit/test_pbreports_report_amplicon_analysis_input.py", line 66, in test_integration
    self.assertEqual(exit_code, 0)
AssertionError: 2 != 0

======================================================================
FAIL: test_basic (test_pbreports_report_mapping_stats.TestIntegrationMappingStatsReport)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/blerch/github/pbreports/tests/unit/test_pbreports_report_mapping_stats.py", line 90, in test_basic
    validate_report_metadata(self, report, meta_rpt)
  File "/home/blerch/github/pbreports/tests/unit/base_test_case.py", line 239, in validate_report_metadata
    self.assertEqual(attr.name, meta_attr.name)
AssertionError: u'Mean Mapped Concordance' != u'Mean Concordance (mapped)'
- Mean Mapped Concordance
+ Mean Concordance (mapped)


----------------------------------------------------------------------
Ran 406 tests in 348.286s

FAILED (SKIP=7, errors=1, failures=2)
